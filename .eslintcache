[{"/home/beto/Desktop/deploy/frontend-test-upload/src/App.js":"1","/home/beto/Desktop/deploy/frontend-test-upload/src/context/auth.js":"2","/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/Register/index.js":"3","/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/Profile/index.js":"4","/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/Login/styles.js":"5","/home/beto/Desktop/deploy/frontend-test-upload/src/components/Input/index.js":"6","/home/beto/Desktop/deploy/frontend-test-upload/src/components/Button/styles.js":"7","/home/beto/Desktop/deploy/frontend-test-upload/src/history.js":"8","/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/Login/index.js":"9","/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/Register/styles.js":"10","/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/Profile/styles.js":"11","/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/SearchClients/styles.js":"12","/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/SearchClients/index.js":"13"},{"size":445,"mtime":1606430899677,"results":"14","hashOfConfig":"15"},{"size":1623,"mtime":1606447352607,"results":"16","hashOfConfig":"15"},{"size":2460,"mtime":1606447521075,"results":"17","hashOfConfig":"15"},{"size":2033,"mtime":1606448229170,"results":"18","hashOfConfig":"15"},{"size":1184,"mtime":1606372735591,"results":"19","hashOfConfig":"15"},{"size":1260,"mtime":1606368897918,"results":"20","hashOfConfig":"15"},{"size":363,"mtime":1606373871310,"results":"21","hashOfConfig":"15"},{"size":87,"mtime":1606430982245,"results":"22","hashOfConfig":"15"},{"size":2082,"mtime":1606447392259,"results":"23","hashOfConfig":"15"},{"size":1298,"mtime":1606417692833,"results":"24","hashOfConfig":"15"},{"size":2487,"mtime":1606436017502,"results":"25","hashOfConfig":"15"},{"size":3574,"mtime":1606447243760,"results":"26","hashOfConfig":"15"},{"size":1987,"mtime":1606447380347,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},"14vyqn0",{"filePath":"31","messages":"32","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"30"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"36","messages":"37","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"48","usedDeprecatedRules":"30"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"57","usedDeprecatedRules":"30"},"/home/beto/Desktop/deploy/frontend-test-upload/src/App.js",[],["58","59"],"/home/beto/Desktop/deploy/frontend-test-upload/src/context/auth.js",["60"],"import React, { createContext, useEffect, useState } from 'react';\nimport api from '../services/api';\n\nconst AuthContext = createContext({});\n\nexport const AuthProvider = ({children}) => {\n    const [user,setUser] = useState(null);\n    const [searchedUser, setSearchedUser] = useState(null);\n\n    useEffect(() => {\n        async function loadStorageData() {\n            const storagedUser = localStorage.getItem('app:user');\n            const storagedToken = localStorage.getItem('app:token');\n            \n            if(storagedToken && storagedUser) {\n                setUser(JSON.parse(storagedUser));\n            }\n        }\n\n        loadStorageData();\n    }, []);\n\n    async function signIn(email, password) {\n        try {\n            const response = await api.post('user/login', {\n                email,\n                password,\n            });\n\n            setUser(response.data.user);\n\n            const { token, user } = response.data;\n\n            localStorage.setItem('app:token', token);\n            localStorage.setItem('app:user', JSON.stringify(user));\n\n            api.defaults.headers.Authorization = `${token}`;\n\n            console.log(response.data);\n\n        } catch (err) {\n            console.log(err.message);\n        }    \n    }\n\n    async function signOut() {\n        setUser(null);\n\n        localStorage.removeItem('app:token');\n        localStorage.removeItem('app:user');\n    }\n    \n    return (\n        <AuthContext.Provider value={{signed: !!user, user, signIn, searchedUser, setSearchedUser}}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n\nexport default AuthContext;","/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/Register/index.js",["61","62"],"/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/Profile/index.js",["63","64"],"/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/Login/styles.js",[],"/home/beto/Desktop/deploy/frontend-test-upload/src/components/Input/index.js",[],"/home/beto/Desktop/deploy/frontend-test-upload/src/components/Button/styles.js",[],"/home/beto/Desktop/deploy/frontend-test-upload/src/history.js",[],"/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/Login/index.js",["65"],"import React, { useRef, useContext } from 'react';\nimport Input from '../../components/Input/index';\nimport * as Yup from 'yup';\nimport history from '../../history';\nimport Button from '../../components/Button';\n\nimport {\n    Container,\n    BackgroundArea,\n    FormArea,\n    Form,\n    Link\n} from './styles';\n\nimport AuthContext from '../../context/auth';\n\nconst Login = () => {\n  const { signed, signIn, user } = useContext(AuthContext);\n  const formRef = useRef(null);\n\n  async function handleSubmit(data, { reset }) {\n    try {\n        const schema = Yup.object().shape({\n            email: Yup.string()\n                .required('Email obrigatório').email('Digite um e-mail válido'),\n            password: Yup.string()\n                .required('A senha é obrigatória').min(6,'Mínimo de 6 caracteres'),\n        });\n        \n        await schema.validate(data, {\n            abortEarly: false,\n        });\n        \n        signIn(data.email, data.password);\n\n        console.log(user);\n\n        formRef.current?.setErrors({});\n\n        reset();\n\n        history.push('/dashboard');\n    } catch (err) {\n        if (err instanceof Yup.ValidationError) {\n            const validationErrors = {};\n\n            err.inner.forEach(error => {\n              validationErrors[error.path] = error.message;\n            });\n          \n            formRef.current?.setErrors(validationErrors);\n\n            return;\n        } \n    }\n  }\n\n  return (\n      <Container>\n          <FormArea>\n            <Form ref={formRef} onSubmit={handleSubmit}>\n                <h1>Faça seu login</h1>\n                <Input placeholder=\"Email\" type=\"email\" name=\"email\" />\n                <Input placeholder=\"Senha\" type=\"password\" name=\"password\" />\n                <Button title=\"ENTRAR\" type=\"submit\">ENTRAR</Button>\n            </Form>\n\n            <Link to=\"/register\">\n                Criar conta\n            </Link>\n          </FormArea>\n          \n          <BackgroundArea>\n            <img src=\"./nature.jpg\" alt=\"\"/>\n          </BackgroundArea>\n      </Container>\n  );\n}\n\nexport default Login;","/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/Register/styles.js",[],"/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/Profile/styles.js",[],"/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/SearchClients/styles.js",[],"/home/beto/Desktop/deploy/frontend-test-upload/src/Pages/SearchClients/index.js",["66","67"],"import React, { useRef, useState, useContext, useEffect } from 'react';\nimport AuthContext from '../../context/auth';\nimport {\n    Container,\n    Menu,\n    Link,\n    DashMenuArea,\n    ContentArea,\n    WrapperClients,\n    SmallCard,\n    SearchArea,\n    ClientLink\n} from './styles';\nimport api from '../../services/api';\n\n  const SearchClient = () => {\n  const formRef = useRef(null);\n  const [clients, setClients] = useState([]);\n  const { user, setSearchedUser } = useContext(AuthContext);\n\n  useEffect(() => {\n      (async () => {\n          const { data } = await api.get('/user');\n\n          setClients(data);\n    })();\n\n  }, []);\n\n  async function handleSearch(data, { reset }) {\n    try {\n        setClients(data);\n        reset();\n    } catch (err) {\n        return; \n    }\n  }\n\n\n  return (\n      <Container>\n          <DashMenuArea>\n            <img src=\"./user-avatar.svg\" alt=\"\"/>\n            <p>Pedro Beda</p>\n\n            <Menu>\n                <ul>\n                    <li><Link to={`/profile/${user._id}`}>Meu Perfil</Link></li>\n                    <li><Link to=\"/search\">Clientes</Link></li>\n                </ul>\n            </Menu>\n          </DashMenuArea>\n          \n          <ContentArea>\n            <p>Clientes</p>\n            <SearchArea>\n                <input type=\"text\" placeholder=\"Buscar\" />\n                <button type=\"submit\" onSubmit={handleSearch}><img src=\"./search.svg\" alt=\"\"/></button>\n            </SearchArea>\n\n            <WrapperClients>\n                {clients.map((user) => (\n                    <>\n                    <SmallCard key={user._id}>\n                        <ClientLink to={`profile/${user._id}`}>\n                            <img src=\"./user-avatar.svg\" alt=\"\"/>\n                            {user.name}\n                        </ClientLink>\n                    </SmallCard>\n                    </>\n                ))}\n            </WrapperClients>\n          </ContentArea>\n      </Container>\n  );\n}\n\nexport default SearchClient;",{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","replacedBy":"71"},{"ruleId":"72","severity":1,"message":"73","line":46,"column":20,"nodeType":"74","messageId":"75","endLine":46,"endColumn":27},{"ruleId":"72","severity":1,"message":"76","line":1,"column":25,"nodeType":"74","messageId":"75","endLine":1,"endColumn":33},{"ruleId":"72","severity":1,"message":"77","line":1,"column":35,"nodeType":"74","messageId":"75","endLine":1,"endColumn":45},{"ruleId":"72","severity":1,"message":"78","line":1,"column":17,"nodeType":"74","messageId":"75","endLine":1,"endColumn":23},{"ruleId":"79","severity":1,"message":"80","line":29,"column":8,"nodeType":"81","endLine":29,"endColumn":10,"suggestions":"82"},{"ruleId":"72","severity":1,"message":"83","line":18,"column":11,"nodeType":"74","messageId":"75","endLine":18,"endColumn":17},{"ruleId":"72","severity":1,"message":"84","line":17,"column":9,"nodeType":"74","messageId":"75","endLine":17,"endColumn":16},{"ruleId":"72","severity":1,"message":"85","line":19,"column":17,"nodeType":"74","messageId":"75","endLine":19,"endColumn":32},"no-native-reassign",["86"],"no-negated-in-lhs",["87"],"no-unused-vars","'signOut' is defined but never used.","Identifier","unusedVar","'useState' is defined but never used.","'useContext' is defined but never used.","'useRef' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'user._id'. Either include it or remove the dependency array.","ArrayExpression",["88"],"'signed' is assigned a value but never used.","'formRef' is assigned a value but never used.","'setSearchedUser' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"89","fix":"90"},"Update the dependencies array to be: [user._id]",{"range":"91","text":"92"},[662,664],"[user._id]"]